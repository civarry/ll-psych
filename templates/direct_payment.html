{% extends 'base.html' %}

{% block title %}Payment for {{ exam_title }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <a href="{{ url_for('buy', exam_id=exam.id) }}" class="btn btn-outline-secondary">Back to Checkout</a>
</div>

<div class="container py-5">
  <div class="card shadow-lg border-0">
    <div class="card-header bg-primary text-white py-3">
      <h4 class="mb-0 fw-bold">Complete Your Payment</h4>
    </div>

    <div class="card-body p-0">
      <div class="row g-0">
        <!-- Left Column: Exam Summary -->
        <div class="col-lg-6 p-4 border-end">
          <div class="h-100 d-flex flex-column">
            <h5 class="fw-bold mb-3 fs-4">{{ exam_title }}</h5>
            <div class="bg-light p-3 rounded mb-4">
              <h6 class="text-uppercase text-secondary fw-bold mb-3 small">Amount Due</h6>
              <div class="d-flex justify-content-between align-items-center">
                <span class="fw-bold fs-5">Total:</span>
                <span class="badge bg-success fs-4 px-3 py-2">â‚±{{ "%.2f"|format(amount) }}</span>
              </div>
              <div class="text-end mt-2">
                <small class="text-muted">One-time payment only</small>
              </div>
            </div>
            <div class="mt-auto">
              <div class="alert alert-info small" role="alert">
                This is a development/test form. Use test card <strong>4343434343434345</strong>.
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column: Payment Form -->
        <div class="col-lg-6 p-4">
          <h6 class="text-uppercase text-secondary fw-bold mb-3 small">Enter your payment details</h6>

          <form action="{{ url_for('process_payment', purchase_id=purchase_id) }}" method="post" id="payment-form">
            <div class="mb-3">
              <label for="card_number" class="form-label fw-semibold">Card Number</label>
              <input type="text" class="form-control" id="card_number" name="card_number" placeholder="4343434343434345" required>
              <div class="form-text">Use 4343434343434345 for testing</div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="expiry" class="form-label fw-semibold">Expiry (MM/YY)</label>
                <input type="text" class="form-control" id="expiry" name="expiry" placeholder="12/25" required>
              </div>
              <div class="col-md-6">
                <label for="cvc" class="form-label fw-semibold">CVC</label>
                <input type="text" class="form-control" id="cvc" name="cvc" placeholder="123" required>
              </div>
            </div>

            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary btn-lg">
                <i class="bi bi-credit-card me-2"></i>Pay Now
              </button>
            </div>

            <div class="mt-4 text-center">
              <div class="d-flex justify-content-center gap-2 mb-2">
                <i class="bi bi-shield-check text-success"></i>
                <small class="fw-semibold">Secure payment processing</small>
              </div>
              <small class="text-muted">Your payment information is encrypted</small>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
